#!/bin/bash
#
order_ve1000="logo bar5 bar4 bar3 bar2 bar1 wifi usb_left usb_top usb_bottom usb_right"
order_edge500="logo bar5 bar4 bar3 bar2 bar1 wifi ap2 sta1 sta2 sta3 usb_left usb_top usb_bottom usb_right"
# determine board type
board="`cat /sys/devices/platform/vc/board`"
echo $0: board: $board
case "$board" in
ve1000)
  order=$order_ve1000
  ;;
edge500)
  order=$order_edge500
  ;;
edge-portwell|edge-nexcom)
  echo $0: no leds
  exit 2
  ;;
*)
  echo $0: unknown board
  exit 1
  ;;
esac
cd /sys/devices/platform/vc/leds
# all off
echo $0: all off
echo 0 > off
sleep 1
if [ "$1" != "-i" ]; then
  # sequence all red
  echo $0: sequence reds
  for i in $order
  do
    echo 0xff > $i
    sleep 1
  done
  # sequence all green
  echo $0: sequence greens
  for i in $order
  do
    echo 0xff00 > $i
    sleep 1
  done
  # sequence all blue
  echo $0: sequence blues
  for i in $order
  do
    echo 0xff0000 > $i
    sleep 1
  done
fi
# all red intensity;
echo $0: red intensity up/down
for v in {0..15} {15..0}
do
  bgr=$(($v << 4))
  for i in $order
  do
    echo $bgr > $i
  done
done
# all green intensity;
echo $0: green intensity up/down
for v in {0..15} {15..0}
do
  bgr=$(($v << 12))
  for i in $order
  do
    echo $bgr > $i
  done
done
# all blue intensity;
echo $0: blue intensity up/down
for v in {0..15} {15..0}
do
  bgr=$(($v << 20))
  for i in $order
  do
    echo $bgr > $i
  done
done
# all white intensity;
echo $0: white intensity up/down
for v in {0..15} {15..0}
do
  bgr=$((($v << 20) | ($v << 12) | ($v << 4)))
  for i in $order
  do
    echo $bgr > $i
  done
done

