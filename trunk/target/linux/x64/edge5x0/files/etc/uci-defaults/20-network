#!/bin/sh

# base-files sticks in an /etc/config/network that is useless for us.
# we depend on this file being removed after first boot, so that we
# only clobber the default /etc/config/network on the very first boot.
# [ -r /etc/config/network ] && exit 0

if ! fgrep -q '### DUMMY CONFIGURATION' /etc/config/network 2>/dev/null; then
	# Not the dummy config. All is OK; just exit and remove this script.
	exit 0
fi

EDGETYPE=`/etc/edgetype`

case "$EDGETYPE" in
    edge51*)
        cp /etc/config-defaults/edge510/network /etc/config/network
        cp /etc/config-defaults/edge510/wireless /etc/config/wireless
        ;;
    edge5[24]*)
        cp /etc/config-defaults/edge5x0/network /etc/config/network
        cp /etc/config-defaults/edge5x0/wireless /etc/config/wireless
        ;;
    *)  # use edge5x0 defaults
        cp /etc/config-defaults/edge5x0/network /etc/config/network
        cp /etc/config-defaults/edge5x0/wireless /etc/config/wireless
        ;;
esac
